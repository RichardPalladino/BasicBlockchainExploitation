from brownie import accounts

from scripts.deploy import deploy_bank_contract

WEI_MULTIPLIER = 10**18


def test_fund():
    # ARRANGE
    bank_contract = deploy_bank_contract()
    bank_owner = accounts[0]
    # ACT
    tx = bank_contract.deposit({"from": bank_owner, "value": 1 * WEI_MULTIPLIER})
    tx.wait(1)
    # ASSERT
    assert bank_contract.balance() == 1 * WEI_MULTIPLIER
    assert bank_contract.getBalance({"from": bank_owner}) == 1 * WEI_MULTIPLIER


def test_withdraw():
    # ARRANGE
    bank_contract = deploy_bank_contract()
    bank_owner = accounts[0]
    # ACT
    tx = bank_contract.deposit({"from": bank_owner, "value": 5 * WEI_MULTIPLIER})
    tx.wait(1)
    # ASSERT
    assert bank_contract.balance() == 5 * WEI_MULTIPLIER
    assert bank_contract.getBalance({"from": bank_owner}) == 5 * WEI_MULTIPLIER
    assert bank_contract.withdraw(5 * WEI_MULTIPLIER, {"from": bank_owner})
